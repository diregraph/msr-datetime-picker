<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../datetime-picker/overlay-date-picker.html">
<link rel="import" href="./mu-picker.html">
<link rel="import" href="./picker-date.html">
<link rel="import" href="../iron-icons/iron-icons.html">


<dom-module id="mrs-datetime-picker">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>
        <custom-style>
            <style is="custom-style">
                picker-date.greenTheme {
                    --datetime-selected-background: #1cccac;
                    --datetime-selected-color: #fff;
                    --datetime-background: #448b7e;
                    --datetime-color: #fff;
                }
                mu-picker.greenTheme {
                    --datetime-selected-background: #1cccac;
                    --datetime-selected-color: #fff;
                    --datetime-background: #448b7e;
                    --datetime-color: #fff;
                }
            </style>
        </custom-style>
        <div class="vertical-section-container">
            <picker-date class$="[[theme]]"
                         auto-confirm
                         date="{{date}}"
                         no-overlap
                         locale-for-input=[[localeForDateInput]]

            >
            </picker-date>
            <iron-icon icon="icons:event"></iron-icon>

            <mu-picker class$="[[theme]]"
                       no-overlap
                       time="{{time}}"
                       microseconds="{{microseconds}}"
            ></mu-picker>
            <iron-icon icon="icons:schedule"></iron-icon>
            <!--need to add a leading zero to microseconds when it is less than 100-->
            <!--<div>date: [[date]]</div>
            <div>time: [[time]][[microseconds]]</div>-->

        </div>
    </template>

    <script>
        /**
         * `mrs-datetime-picker`
         * A polymer element by incorporating datetime-picker webcomponent by fooloomanzoo
         *
         * @customElement
         * @polymer
         * @demo demo/index.html
         */

        /**
         * value="en">MM/DD/YYYY</option>
         * value="fr">DD/MM/YYYY</option>
         * value="ja">YYYY/MM/DD</option>
         */
        class MrsDatetimePicker extends Polymer.Element {
            static get is() {
                return 'mrs-datetime-picker';
            }

            static get properties() {
                return {
                    localeForDateInput: {
                        type: String,
                        value: 'en'
                    },
                    theme: {
                        type: String,
                        value: ''
                    },
                    date: {
                        type: String,
                        notify: true
                    },
                    time: {
                        type: String,
                        notify: true
                    },
                    microseconds: {
                        type: String
                    },
                    timeWithMicroseconds: {
                        type: String,
                        notify: true
                    }
                }
            }

            static get observers() {
                return [
                    '_updateTime(time, microseconds)'
                ]
            }

            _updateTime(time, microseconds) {
                let intMu = parseInt(microseconds);
                let strMu;
                if(intMu < 100){
                    if(intMu < 10){
                        strMu = '00'+ intMu.toString();
                    }else{
                        strMu = '0'+ intMu.toString();
                    }
                }else{
                    strMu = intMu.toString();
                }
                this.timeWithMicroseconds = time+' '+strMu;
            }
        }

        window.customElements.define(MrsDatetimePicker.is, MrsDatetimePicker);
    </script>
</dom-module>
